name: Join Tower
description: Automatically join tower battles
version: "1.0"
author: System
steps:
  - scene: main_city
    timeout: 5s
    actions:
      - type: click
        points:
          - {x: 674, y: 15}
      - type: wait
        duration: 1s
      - type: click
        points:
          - {x: 818, y: 394}
      - type: wait
        duration: 1s

  - scene: main_city_shadow
    timeout: 5s
    actions:
      - type: click
        points:
          - {x: 674, y: 15}
      - type: wait
        duration: 500ms
      - type: click
        points:
          - {x: 674, y: 15}
      - type: wait
        duration: 1s
      - type: click
        points:
          - {x: 818, y: 394}
      - type: wait
        duration: 1s

  - scene: tower_entrance_1
    timeout: 5s
    ocrRule:
      mode: ratio
      roi:
        x: 510
        y: 602
        width: 90
        height: 50
      condition: "used > 7 || used > total"
      action: quit_exhausted
    actions:
      - type: loop
        count: -1
        interval: 800ms
        actions:
          - type: click
            points:
              - {x: 546, y: 679}
          - type: wait
            duration: 1s
          - type: click
            points:
              - {x: 726, y: 194}
          - type: wait
            duration: 300ms
          - type: click
            points:
              - {x: 726, y: 314}
          - type: wait
            duration: 1s
          - type: click
            points:
              - {x: 394, y: 447}
          - type: wait
            duration: 1s
          - type: click
            points:
              - {x: 538, y: 420}
          - type: wait
            duration: 1s
          - type: check_scene

  - scene: tower_entrance_2
    timeout: 5s
    ocrRule:
      mode: ratio
      roi:
        x: 510
        y: 602
        width: 90
        height: 50
      condition: "used > 10 || used > total"
      action: quit_exhausted
    actions:
      - type: loop
        count: -1
        interval: 800ms
        actions:
          - type: click
            points:
              - {x: 546, y: 679}
          - type: wait
            duration: 1s
          - type: click
            points:
              - {x: 726, y: 194}
          - type: wait
            duration: 300ms
          - type: click
            points:
              - {x: 726, y: 314}
          - type: wait
            duration: 1s
          - type: click
            points:
              - {x: 394, y: 447}
          - type: wait
            duration: 1s
          - type: click
            points:
              - {x: 538, y: 420}
          - type: wait
            duration: 1s
          - type: check_scene
